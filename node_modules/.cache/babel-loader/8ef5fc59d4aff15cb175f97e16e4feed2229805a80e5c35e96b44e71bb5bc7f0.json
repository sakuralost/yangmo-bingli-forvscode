{"ast":null,"code":"var _jsxFileName = \"F:\\\\Users\\\\\\u8FF7\\u5931\\u5C0F\\u7237\\\\\\u6587\\u6863\\\\Aicoder\\\\vscode\\\\bingli\\\\medical-record-assistant\\\\src\\\\pages\\\\HomePage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport RecordList from '../components/RecordList';\nimport { fetchRecords } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ADMIN_PASSWORD = '19890523'; // 管理员密码\n\nconst HomePage = () => {\n  _s();\n  const navigate = useNavigate();\n  const [records, setRecords] = useState([]);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n\n  // 验证管理员密码\n  const handleLogin = () => {\n    if (password === ADMIN_PASSWORD) {\n      setIsAuthenticated(true);\n      setError('');\n      // 将认证状态保存在 sessionStorage 中，这样刷新页面时不需要重新输入密码\n      sessionStorage.setItem('isAuthenticated', 'true');\n    } else {\n      setError('密码错误');\n    }\n    setPassword('');\n  };\n\n  // 检查是否已经认证\n  useEffect(() => {\n    const auth = sessionStorage.getItem('isAuthenticated');\n    if (auth === 'true') {\n      setIsAuthenticated(true);\n    }\n  }, []);\n\n  // 加载病例数据\n  useEffect(() => {\n    if (isAuthenticated) {\n      const loadRecords = async () => {\n        try {\n          const fetchedRecords = await fetchRecords();\n          setRecords(fetchedRecords);\n        } catch (error) {\n          console.error('加载病例数据失败:', error);\n        }\n      };\n      loadRecords();\n    }\n  }, [isAuthenticated]);\n\n  // 跳转到新增病例页面\n  const handleAddNewRecord = () => {\n    navigate('/patient');\n  };\n\n  // 如果未认证，显示登录界面\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u75C5\\u4F8B\\u8BB0\\u5F55\\u8F85\\u52A9\\u8F6F\\u4EF6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u7BA1\\u7406\\u5458\\u5BC6\\u7801\",\n          onKeyPress: e => e.key === 'Enter' && handleLogin()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLogin,\n          children: \"\\u767B\\u5F55\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"error-message\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this);\n  }\n\n  // 已认证，显示主界面\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"app-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u75C5\\u4F8B\\u8BB0\\u5F55\\u8F85\\u52A9\\u8F6F\\u4EF6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"add-record-button\",\n        onClick: handleAddNewRecord,\n        children: \"\\u65B0\\u589E\\u75C5\\u4F8B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"main-content\",\n      children: /*#__PURE__*/_jsxDEV(RecordList, {\n        records: records\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n};\n_s(HomePage, \"of7ent5ERFpfuoe6BgiaTE6RmXc=\", false, function () {\n  return [useNavigate];\n});\n_c = HomePage;\nexport default HomePage;\nvar _c;\n$RefreshReg$(_c, \"HomePage\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","RecordList","fetchRecords","jsxDEV","_jsxDEV","ADMIN_PASSWORD","HomePage","_s","navigate","records","setRecords","isAuthenticated","setIsAuthenticated","password","setPassword","error","setError","handleLogin","sessionStorage","setItem","auth","getItem","loadRecords","fetchedRecords","console","handleAddNewRecord","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","e","target","placeholder","onKeyPress","key","onClick","_c","$RefreshReg$"],"sources":["F:/Users/迷失小爷/文档/Aicoder/vscode/bingli/medical-record-assistant/src/pages/HomePage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport RecordList from '../components/RecordList';\nimport { fetchRecords } from '../services/api';\nimport { Record } from '../types';\n\nconst ADMIN_PASSWORD = '19890523'; // 管理员密码\n\nconst HomePage: React.FC = () => {\n    const navigate = useNavigate();\n    const [records, setRecords] = useState<Record[]>([]);\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\n    const [password, setPassword] = useState('');\n    const [error, setError] = useState('');\n\n    // 验证管理员密码\n    const handleLogin = () => {\n        if (password === ADMIN_PASSWORD) {\n            setIsAuthenticated(true);\n            setError('');\n            // 将认证状态保存在 sessionStorage 中，这样刷新页面时不需要重新输入密码\n            sessionStorage.setItem('isAuthenticated', 'true');\n        } else {\n            setError('密码错误');\n        }\n        setPassword('');\n    };\n\n    // 检查是否已经认证\n    useEffect(() => {\n        const auth = sessionStorage.getItem('isAuthenticated');\n        if (auth === 'true') {\n            setIsAuthenticated(true);\n        }\n    }, []);\n\n    // 加载病例数据\n    useEffect(() => {\n        if (isAuthenticated) {\n            const loadRecords = async () => {\n                try {\n                    const fetchedRecords = await fetchRecords();\n                    setRecords(fetchedRecords);\n                } catch (error) {\n                    console.error('加载病例数据失败:', error);\n                }\n            };\n            loadRecords();\n        }\n    }, [isAuthenticated]);\n\n    // 跳转到新增病例页面\n    const handleAddNewRecord = () => {\n        navigate('/patient');\n    };\n\n    // 如果未认证，显示登录界面\n    if (!isAuthenticated) {\n        return (\n            <div className=\"login-container\">\n                <h2>病例记录辅助软件</h2>\n                <div className=\"login-form\">\n                    <input\n                        type=\"password\"\n                        value={password}\n                        onChange={(e) => setPassword(e.target.value)}\n                        placeholder=\"请输入管理员密码\"\n                        onKeyPress={(e) => e.key === 'Enter' && handleLogin()}\n                    />\n                    <button onClick={handleLogin}>登录</button>\n                    {error && <p className=\"error-message\">{error}</p>}\n                </div>\n            </div>\n        );\n    }\n\n    // 已认证，显示主界面\n    return (\n        <div className=\"home-page\">\n            <header className=\"app-header\">\n                <h1>病例记录辅助软件</h1>\n                <button\n                    className=\"add-record-button\"\n                    onClick={handleAddNewRecord}\n                >\n                    新增病例\n                </button>\n            </header>\n\n            <main className=\"main-content\">\n                <RecordList records={records} />\n            </main>\n        </div>\n    );\n};\n\nexport default HomePage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}